model_type=flaubert
model_name=flaubert_base_cased
model_fname="models--${model_type}--${model_name}/snapshots"

lre=0.000005
lrp=0.000005
batch_size=8
lr=0.000005
epochs=10
dropout=0.1

exp_name="xnli_hf_${model_type}_${model_name}"
exp_id="dropout_${dropout}_lre_${lre}_lrp_${lrp}"

# Explicit file paths
train_file=flue/data/xnli/processed-csv/train.csv
validation_file=flue/data/xnli/processed-csv/valid.csv
test_file=flue/data/xnli/processed-csv/test.csv

# Additional parameters for Hugging Face script
data_dir=flue/data/xnli/processed-csv
task_name=text_classification

# Fine-tuning parameters
weight_decay=0.0
warmup_steps=0
gradient_accumulation_steps=1
eval_strategy=no
save_strategy=steps

snapshot_hash=f681df336b523e136915ae97bc8bd0ef4933ae36

# Allow override of model name from environment or use default
if [ ! -z "$MODEL_NAME" ]; then
    model_name_or_path="$MODEL_NAME"
else
    model_name_or_path="flaubert/flaubert_base_cased"
fi
output_dir="flue/experiments/${model_type}/${exp_name}/${exp_id}"

save_steps=50000
max_seq_length=512